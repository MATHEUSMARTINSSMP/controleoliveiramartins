# Netlify Configuration

[build]
  command = "npm run build"
  publish = "dist"

# Scheduled Functions (alternativa ao pg_cron)
# Descomente se pg_cron não estiver disponível
# [[functions]]
#   name = "process-store-task-alerts-scheduled"
#   schedule = "* * * * *"  # A cada minuto

# Environment variables
[build.environment]
  NODE_VERSION = "18"

# Secrets scanning configuration
# Ignore test files and archives that may contain old secrets
[build.processing]
  skip_processing = false

# Omit paths from secrets scanning
[build.processing.secrets_scan]
  omit_paths = [
    "attached_assets/**",
    "sql_migrations_archive/**",
    "dist/**",
    "*verificar*.js",
    "*test*.js",
    "*check*.js",
    "*varredura*.js",
    "*verify*.js",
    "processar-fila-whatsapp.js"
  ]
  
  # Omit specific secret keys that are expected in build output
  omit_keys = [
    "SUPABASE_ANON_KEY",
    "VITE_SUPABASE_ANON_KEY"
  ]
